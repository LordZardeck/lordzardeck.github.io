<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.4.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>PhantomJS 2 in TravisCI - Sean Templeton: Web Developer</title>




<meta name="description" content="PhantomJS 2 doesn’t work out of the box with Travis, today I figured out how">




<meta name="author" content="Sean Templeton">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Sean Templeton: Web Developer">
<meta property="og:title" content="PhantomJS 2 in TravisCI">


  <link rel="canonical" href="https://templeton.io/phantomjs-2-in-travisci/">
  <meta property="og:url" content="https://templeton.io/phantomjs-2-in-travisci/">



  <meta property="og:description" content="PhantomJS 2 doesn’t work out of the box with Travis, today I figured out how">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-01-21T07:15:18+00:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Sean Templeton",
      "url" : "https://templeton.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://templeton.io/feed.xml" type="application/atom+xml" rel="alternate" title="Sean Templeton: Web Developer Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://templeton.io/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://templeton.io/">Sean Templeton: Web Developer</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://templeton.io/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://templeton.io/classy-llama/">Llama</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://templeton.io/posts/">Blog</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://templeton.io/images/bio-photo.jpg" class="author__avatar" alt="Sean Templeton" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Sean Templeton</h3>
    
      <p class="author__bio" itemprop="description">
        I am a Web Developer and technology enthusiast who has been developing web applications since I was 15 years old.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      
        <li>
          <a href="mailto:sean@templeton.io">
            <meta itemprop="email" content="sean@templeton.io" />
            <i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/lordzardeck" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/lordzardeck" itemprop="sameAs">
            <i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/lordzardeck" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      
        <li>
          <a href="https://www.stackoverflow.com/users/633513/lordzardeck" itemprop="sameAs">
            <i class="fa fa-fw fa-stack-overflow" aria-hidden="true"></i> Stackoverflow
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="PhantomJS 2 in TravisCI">
    <meta itemprop="description" content="PhantomJS 2 doesn’t work out of the box with Travis, today I figured out how">
    <meta itemprop="datePublished" content="January 21, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">PhantomJS 2 in TravisCI
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  2 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>We recently added unit tests to our project, and ran them with Karma off of PhantomJS. After hours of frustration we discovered that the 1.x version of PhantomJS did not support some basic ES5 functionality, such as <code class="highlighter-rouge">Function.prototype.bind</code>. We also learned taht there was a 2.x unstable version of PhantomJS that did support this requirement, so we proceeded to update to <code class="highlighter-rouge">karma-phantomjs2-launcher</code>. This all worked fine on our local machines, and we went on our merry way, continuing to add tests.</p>

<p>Once we were finished, we pushed to GitHub our changes, and awaited Travis to show us that beautiful green build notification. Instead we got red.</p>

<p>Unfortuanetly PhantomJS isn’t supported out of the box on Travis. After scouring the dark corners of the web, we gave up trying to get PhantomJS 2 to run on Travis’ containers and reverted back to their legacy system, installing shared library depencies and the like, and finally got our builds working. Although they took <em>forever</em> to run.</p>

<h2 id="light-at-the-end-of-the-tunnel">Light at the end of the tunnel</h2>

<p>After being frustrated by the recent issues with Travis not building legacy builds, I took up arms again and fought to find a solution to running PhantomJS 2 on Travis containers. A Travis representitve offered a snippet of code to go our <code class="highlighter-rouge">.travis.yml</code> file, but no such luck.</p>

<blockquote>
  <p>Addition to .travis.yml file from Travis representitive:</p>
</blockquote>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">mkdir travis-phantomjs</span>
  <span class="pi">-</span> <span class="s">wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2 -O $PWD/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2</span>
  <span class="pi">-</span> <span class="s">tar -xvf $PWD/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2 -C $PWD/travis-phantomjs</span>
  <span class="pi">-</span> <span class="s">export PATH=$PWD/travis-phantomjs:$PATH</span></code></pre></figure>

<p>After continuing the discussion, they pointed out the fact that one of our node modules was re-installing PhantomJS, back to an unsupported build. That’s when things started rolling toward victory.</p>

<h1 id="the-final-solution">The final solution</h1>

<p>After exploring the packages installed by <code class="highlighter-rouge">karma-phantomjs2-launcher</code>, I came across the <code class="highlighter-rouge">phantomjs-ext</code> package and their npm page: https://www.npmjs.com/package/phantomjs2-ext. Reading through the docs, I noticed we could specify a custom version through an environment variable. Sure enough, specifying version <code class="highlighter-rouge">2.0.0</code> for <code class="highlighter-rouge">PHANTOMJS2_VERSION</code> in travis’s environment variables unlocked the blazing speed of contianers. Our quest was over.</p>

<h1 id="tldr">TL;DR</h1>

<p>So if you are looking to add PhantomJS 2 to your Travis builds, there are 2 things you need to do:</p>

<ol>
  <li>Install the supported build of PhantomJS 2 from travis’s s3 bucket and add it to the path</li>
  <li>Add an environment variable to Travis specifying the PhantomJS version you installed</li>
</ol>

<h2 id="travisyml-file">.travis.yml file</h2>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">mkdir travis-phantomjs</span>
  <span class="pi">-</span> <span class="s">wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2 -O $PWD/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2</span>
  <span class="pi">-</span> <span class="s">tar -xvf $PWD/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2 -C $PWD/travis-phantomjs</span>
  <span class="pi">-</span> <span class="s">export PATH=$PWD/travis-phantomjs:$PATH</span></code></pre></figure>

<h2 id="travis-environment-variable">Travis environment variable</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">PHANTOMJS2_VERSION</span><span class="o">=</span><span class="s2">"2.0.0"</span></code></pre></figure>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://templeton.io/tags/#phantomjs" class="page__taxonomy-item" rel="tag">phantomjs</a><span class="sep">, </span>
    
      
      
      <a href="https://templeton.io/tags/#travis-ci" class="page__taxonomy-item" rel="tag">travis ci</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://templeton.io/categories/#development" class="page__taxonomy-item" rel="tag">Development</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-01-21T07:15:18+00:00">January 21, 2016</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=PhantomJS 2 in TravisCI https://templeton.io/phantomjs-2-in-travisci/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://templeton.io/phantomjs-2-in-travisci/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://templeton.io/phantomjs-2-in-travisci/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://templeton.io/phantomjs-2-in-travisci/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://templeton.io/less-vs-sass-scss-why-which/" class="pagination--pager" title="LESS vs SASS - Why to Use Them and Which to Use
">Previous</a>
    
    
      <a href="https://templeton.io/local-facebook-real-time-api/" class="pagination--pager" title="How to Setup Local Development of Facebook’s Real-Time API
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
    <h4 class="page__comments-title">Leave a Comment</h4>
    <section id="disqus_thread"></section>
  
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://templeton.io/local-facebook-real-time-api/" rel="permalink">How to Setup Local Development of Facebook’s Real-Time API
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Developing against facebook’s real-time webhooks requires a static url utilizing SSL. This may seem impossible to do locally, but in a matter of 15 minutes, ...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://templeton.io/less-vs-sass-scss-why-which/" rel="permalink">LESS vs SASS - Why to Use Them and Which to Use
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">LESS vs SASS: Why we should use them, and which one should you use?
</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/lordzardeck"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://templeton.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Sean Templeton</div>
      </footer>
    </div>

    <script src="https://templeton.io/assets/js/main.min.js"></script>





  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'seantempletonwebdeveloper';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






  </body>
</html>
